!function(){function t(t,n,o,e,c){var i;"email"===n||"client"===n?i=[{email:o}]:"cart"===n||"product"===n?i=[{id:o.productId,name:o.productName,price:o.prices.priceTables[0].price,department:e.productCategories[0]?.name||"",category:e.productCategories[1]?.name||"",subCategory:e.productCategories[2]?.name||"",brand:o.productBrand.name}]:"transaction"===n&&(i=[{transactionId:c.pedidoInfo.Id,id:o.productId,name:o.productName,price:o.prices.priceTables[0].price,department:e.productCategories[0]?.name||"",category:e.productCategories[1]?.name||"",subCategory:e.productCategories[2]?.name||"",brand:o.productBrand.name}]),i&&Btg360.add({account:t,event:n,domain:window.location.hostname,items:i})}function n(t,n){var o="query Query { products(first: 50, filters: { productId: "+parseInt(t,10)+" }) {   edges { node {     productId productName productBrand { name }     productCategories { name }     prices { priceTables { price } }   } } } }";return new Promise((function(t,e){fetch("https://storefront-api.fbits.net/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","TCS-Access-Token":n},credentials:"include",body:JSON.stringify({query:o})}).then((function(t){return t.ok?t.json():e(new Error("Http Error: "+t.status))})).then((function(n){n?.data?.products?.edges?.length>0?t(n.data.products.edges[0].node):e(new Error("Produto n√£o encontrado na resposta"))})).catch((function(t){e(t)}))}))}this.start=function(o,e){new Promise((function(t,n){var o;if(window.location.hostname.includes("checkout"))o="https://"+window.location.hostname+"/api/Login/Get";else{var e=window.location.hostname.split(".");e.shift(),o="https://checkout."+(e=e.join("."))+"/api/Login/Get"}fetch(o,{method:"GET",headers:{accept:"application/json",credentials:"include","Content-Type":"application/json"},credentials:"include"}).then((function(t){return t.json()})).then((function(n){t(n)})).catch((function(t){n(t)}))})).then((function(n){t(o,"client",n?.Email||"",null,null)})).catch((function(t){}));var c,i=window.location.hostname,a=window.location.pathname;if(-1!==i.indexOf("checkout")&&("/"===a?(c="https://"+window.location.hostname+"/api/carrinho",fetch(c,{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((function(t){return t.json()}))).then((function(c){c.Produtos.forEach((function(c){n(c.ProdutoId,e).then((function(n){t(o,"cart",n,{productCategories:n.productCategories},null)})).catch((function(t){}))}))})).catch((function(t){})):"/Confirmacao"===a&&function(){var t="https://"+window.location.hostname+"/api/carrinho";return fetch(t,{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((function(t){return t.json()})).then((function(t){return{produtos:t.Produtos,pedidoInfo:t.Pedidos}}))}().then((function(c){c.produtos.forEach((function(i){n(i.ProdutoId,e).then((function(n){t(o,"transaction",n,{productCategories:n.productCategories},{pedidoInfo:c.pedidoInfo})})).catch((function(t){}))}))})).catch((function(t){}))),-1!==a.indexOf("/produto/")){var r=a.split("-");n(r[r.length-1],e).then((function(n){t(o,"product",n,{productCategories:n.productCategories},null)})).catch((function(t){}))}},window.BtgTracking=this}();